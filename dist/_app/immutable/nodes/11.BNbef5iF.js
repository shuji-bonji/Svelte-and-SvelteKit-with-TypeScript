import"../chunks/CWj6FrbW.js";import"../chunks/BMCwvHoN.js";import{h as ts,s,i as rs,j as a,k as N,t as os,n,l as i}from"../chunks/C6vIfmJG.js";import{P as es,C as l}from"../chunks/CX5eO8Os.js";import"../chunks/C5ZOgBQI.js";import{L as ks}from"../chunks/B_smlA0F.js";var ps=ts(`<div id="-derivedとは" class="svp-anchor-item"></div> <h2><a href="#-derivedとは" class="svp-title-anchor" aria-label="$derivedとは"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>$derivedとは</h2> <p><code></code>は、他のリアクティブな値から自動的に計算される値を作成するルーンです。依存する値が変更されると、自動的に再計算されます。</p> <div id="基本的な使い方" class="svp-anchor-item"></div> <h2><a href="#基本的な使い方" class="svp-title-anchor" aria-label="基本的な使い方"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>基本的な使い方</h2> <div id="シンプルな計算" class="svp-anchor-item"></div> <h3><a href="#シンプルな計算" class="svp-title-anchor" aria-label="シンプルな計算"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>シンプルな計算</h3> <div class="svp-code-block-wrapper"><div class="svp-code-block"><pre class="shiki shiki-themes vitesse-light night-owl" style="background-color:#ffffff;--shiki-dark-bg:#011627;color:#393a34;--shiki-dark:#d6deeb" tabindex="0"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> count</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#2F798A;--shiki-dark:#F78C6C">10</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> doubled</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">count</span><span style="color:#AB5959;--shiki-dark:#C792EA"> *</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 2</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> quadrupled</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">doubled</span><span style="color:#AB5959;--shiki-dark:#C792EA"> *</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 2</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// count が変更されると、doubled と quadrupled が自動的に更新される</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#D6DEEB">count</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 20</span><span style="color:#999999;--shiki-dark:#D6DEEB">;</span><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic"> // doubled = 40, quadrupled = 80</span></span></code></pre> <div class="svp-code-block--lang">typescript</div> <!></div></div> <div id="複数の値から派生" class="svp-anchor-item"></div> <h3><a href="#複数の値から派生" class="svp-title-anchor" aria-label="複数の値から派生"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>複数の値から派生</h3> <div class="svp-code-block-wrapper"><div class="svp-code-block"><pre class="shiki shiki-themes vitesse-light night-owl" style="background-color:#ffffff;--shiki-dark-bg:#011627;color:#393a34;--shiki-dark:#d6deeb" tabindex="0"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> firstName</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#B56959;--shiki-dark:#ECC48D">太郎</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> lastName</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#B56959;--shiki-dark:#ECC48D">山田</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> fullName</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B5695977;--shiki-dark:#D6DEEB">\`</span><span style="color:#1E754F;--shiki-dark:#D3423E">$&#123;</span><span style="color:#B56959;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">lastName</span><span style="color:#1E754F;--shiki-dark:#D3423E">&#125;</span><span style="color:#1E754F;--shiki-dark:#D3423E"> $&#123;</span><span style="color:#B56959;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">firstName</span><span style="color:#1E754F;--shiki-dark:#D3423E">&#125;</span><span style="color:#B5695977;--shiki-dark:#D6DEEB">\`</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// どちらかが変更されると fullName が更新される</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#D6DEEB">firstName</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">次郎</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">;</span><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic"> // fullName = "山田 次郎"</span></span></code></pre> <div class="svp-code-block--lang">typescript</div> <!></div></div> <div id="関数を使った複雑な計算" class="svp-anchor-item"></div> <h2><a href="#関数を使った複雑な計算" class="svp-title-anchor" aria-label="関数を使った複雑な計算"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>関数を使った複雑な計算</h2> <div class="svp-code-block-wrapper"><div class="svp-code-block"><pre class="shiki shiki-themes vitesse-light night-owl" style="background-color:#ffffff;--shiki-dark-bg:#011627;color:#393a34;--shiki-dark:#d6deeb" tabindex="0"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> items</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#D6DEEB">([</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">  &#123;</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> name</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">りんご</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> price</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 100</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> quantity</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 2</span><span style="color:#999999;--shiki-dark:#D6DEEB"> &#125;,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">  &#123;</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> name</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">バナナ</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> price</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 50</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> quantity</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 3</span><span style="color:#999999;--shiki-dark:#D6DEEB"> &#125;,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">  &#123;</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> name</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">みかん</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> price</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 80</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> quantity</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 1</span><span style="color:#999999;--shiki-dark:#D6DEEB"> &#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// 合計金額の計算</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> total</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">()</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  return</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> items</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">reduce</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D7DBE0;--shiki-dark-font-style:italic">sum</span><span style="color:#999999;--shiki-dark:#C792EA">,</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D7DBE0;--shiki-dark-font-style:italic"> item</span><span style="color:#999999;--shiki-dark:#D9F5DD">)</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">    return</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> sum</span><span style="color:#AB5959;--shiki-dark:#C792EA"> +</span><span style="color:#999999;--shiki-dark:#D6DEEB"> (</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">item</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#BAEBE2;--shiki-dark-font-style:italic">price</span><span style="color:#AB5959;--shiki-dark:#C792EA"> *</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> item</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#BAEBE2;--shiki-dark-font-style:italic">quantity</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">  &#125;,</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 0</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">&#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// 税込価格</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> totalWithTax</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">()</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">  const</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> taxRate</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 0.1</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  return</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> Math</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">floor</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">total</span><span style="color:#AB5959;--shiki-dark:#C792EA"> *</span><span style="color:#999999;--shiki-dark:#D6DEEB"> (</span><span style="color:#2F798A;--shiki-dark:#F78C6C">1</span><span style="color:#AB5959;--shiki-dark:#C792EA"> +</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> taxRate</span><span style="color:#999999;--shiki-dark:#D6DEEB">))</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">&#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span></code></pre> <div class="svp-code-block--lang">typescript</div> <!></div></div> <div id="条件付き派生" class="svp-anchor-item"></div> <h2><a href="#条件付き派生" class="svp-title-anchor" aria-label="条件付き派生"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>条件付き派生</h2> <div class="svp-code-block-wrapper"><div class="svp-code-block"><pre class="shiki shiki-themes vitesse-light night-owl" style="background-color:#ffffff;--shiki-dark-bg:#011627;color:#393a34;--shiki-dark:#d6deeb" tabindex="0"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> isLoggedIn</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#1E754F;font-style:inherit;--shiki-dark:#FF5874;--shiki-dark-font-style:italic">false</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> username</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">''</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> greeting</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">()</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#C792EA">  if</span><span style="color:#999999;--shiki-dark:#D6DEEB"> (</span><span style="color:#AB5959;--shiki-dark:#C792EA">!</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">isLoggedIn</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">    return</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">ゲストさん、ようこそ</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">  &#125;</span></span>
<span class="line"><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  return</span><span style="color:#B5695977;--shiki-dark:#D6DEEB"> \`</span><span style="color:#1E754F;--shiki-dark:#D3423E">$&#123;</span><span style="color:#B56959;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">username</span><span style="color:#1E754F;--shiki-dark:#D3423E">&#125;</span><span style="color:#B56959;font-style:inherit;--shiki-dark:#ECC48D;--shiki-dark-font-style:italic">さん、こんにちは</span><span style="color:#B5695977;--shiki-dark:#D6DEEB">\`</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">&#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span></code></pre> <div class="svp-code-block--lang">typescript</div> <!></div></div> <div id="配列とオブジェクトの派生" class="svp-anchor-item"></div> <h2><a href="#配列とオブジェクトの派生" class="svp-title-anchor" aria-label="配列とオブジェクトの派生"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>配列とオブジェクトの派生</h2> <div id="フィルタリング" class="svp-anchor-item"></div> <h3><a href="#フィルタリング" class="svp-title-anchor" aria-label="フィルタリング"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>フィルタリング</h3> <div class="svp-code-block-wrapper"><div class="svp-code-block"><pre class="shiki shiki-themes vitesse-light night-owl" style="background-color:#ffffff;--shiki-dark-bg:#011627;color:#393a34;--shiki-dark:#d6deeb" tabindex="0"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">type</span><span style="color:#2E8F82;--shiki-dark:#D6DEEB"> Todo</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#999999;--shiki-dark:#D6DEEB"> &#123;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#D6DEEB">  id</span><span style="color:#999999;--shiki-dark:#7FDBCA">:</span><span style="color:#2E8F82;--shiki-dark:#C5E478"> number</span><span style="color:#999999;--shiki-dark:#D6DEEB">;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#D6DEEB">  text</span><span style="color:#999999;--shiki-dark:#7FDBCA">:</span><span style="color:#2E8F82;--shiki-dark:#C5E478"> string</span><span style="color:#999999;--shiki-dark:#D6DEEB">;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#D6DEEB">  done</span><span style="color:#999999;--shiki-dark:#7FDBCA">:</span><span style="color:#2E8F82;--shiki-dark:#C5E478"> boolean</span><span style="color:#999999;--shiki-dark:#D6DEEB">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">&#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> todos</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#C792EA">&#x3C;</span><span style="color:#2E8F82;font-style:inherit;--shiki-dark:#FFCB8B;--shiki-dark-font-style:italic">Todo</span><span style="color:#999999;--shiki-dark:#D6DEEB">[]</span><span style="color:#999999;--shiki-dark:#C792EA">></span><span style="color:#999999;--shiki-dark:#D6DEEB">([</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">  &#123;</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> id</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 1</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> text</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">買い物</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> done</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#1E754F;font-style:inherit;--shiki-dark:#FF5874;--shiki-dark-font-style:italic"> false</span><span style="color:#999999;--shiki-dark:#D6DEEB"> &#125;,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">  &#123;</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> id</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 2</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> text</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">掃除</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> done</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#1E754F;font-style:inherit;--shiki-dark:#FF5874;--shiki-dark-font-style:italic"> true</span><span style="color:#999999;--shiki-dark:#D6DEEB"> &#125;,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">  &#123;</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> id</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 3</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> text</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">勉強</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> done</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#1E754F;font-style:inherit;--shiki-dark:#FF5874;--shiki-dark-font-style:italic"> false</span><span style="color:#999999;--shiki-dark:#D6DEEB"> &#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// 未完了のTODOのみ</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> activeTodos</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span></span>
<span class="line"><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">  todos</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">filter</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D7DBE0;--shiki-dark-font-style:italic">todo</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#AB5959;--shiki-dark:#C792EA"> !</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">todo</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#BAEBE2;--shiki-dark-font-style:italic">done</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// 完了したTODOの数</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> completedCount</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span></span>
<span class="line"><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">  todos</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">filter</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D7DBE0;--shiki-dark-font-style:italic">todo</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> todo</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#BAEBE2;--shiki-dark-font-style:italic">done</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#998418;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic">length</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// 進捗率</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> progress</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">()</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#C792EA">  if</span><span style="color:#999999;--shiki-dark:#D6DEEB"> (</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">todos</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#998418;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic">length</span><span style="color:#AB5959;--shiki-dark:#C792EA"> ===</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 0</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic"> return</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 0</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  return</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> Math</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">round</span><span style="color:#999999;--shiki-dark:#D6DEEB">((</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">completedCount</span><span style="color:#AB5959;--shiki-dark:#C792EA"> /</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> todos</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#998418;font-style:inherit;--shiki-dark:#7FDBCA;--shiki-dark-font-style:italic">length</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#AB5959;--shiki-dark:#C792EA"> *</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 100</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">&#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span></code></pre> <div class="svp-code-block--lang">typescript</div> <!></div></div> <div id="マッピング" class="svp-anchor-item"></div> <h3><a href="#マッピング" class="svp-title-anchor" aria-label="マッピング"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>マッピング</h3> <div class="svp-code-block-wrapper"><div class="svp-code-block"><pre class="shiki shiki-themes vitesse-light night-owl" style="background-color:#ffffff;--shiki-dark-bg:#011627;color:#393a34;--shiki-dark:#d6deeb" tabindex="0"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> products</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#D6DEEB">([</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">  &#123;</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> name</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">ノートPC</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> price</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 100000</span><span style="color:#999999;--shiki-dark:#D6DEEB"> &#125;,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">  &#123;</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> name</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">マウス</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> price</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 3000</span><span style="color:#999999;--shiki-dark:#D6DEEB"> &#125;,</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">  &#123;</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> name</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">キーボード</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#998418;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> price</span><span style="color:#999999;--shiki-dark:#D6DEEB">:</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 10000</span><span style="color:#999999;--shiki-dark:#D6DEEB"> &#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> discountRate</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#2F798A;--shiki-dark:#F78C6C">0.1</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic"> // 10%割引</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// 割引後の価格リスト</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> discountedProducts</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">()</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#AB5959;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic"> </span></span>
<span class="line"><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">  products</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">map</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D7DBE0;--shiki-dark-font-style:italic">product</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#D6DEEB"> (</span><span style="color:#999999;--shiki-dark:#C792EA">&#123;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#7FDBCA">    ...</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">product</span><span style="color:#999999;--shiki-dark:#C792EA">,</span></span>
<span class="line"><span style="color:#998418;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">    discountedPrice</span><span style="color:#999999;--shiki-dark:#C792EA">:</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> product</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#BAEBE2;--shiki-dark-font-style:italic">price</span><span style="color:#AB5959;--shiki-dark:#C792EA"> *</span><span style="color:#999999;--shiki-dark:#D6DEEB"> (</span><span style="color:#2F798A;--shiki-dark:#F78C6C">1</span><span style="color:#AB5959;--shiki-dark:#C792EA"> -</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> discountRate</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#999999;--shiki-dark:#C792EA">,</span></span>
<span class="line"><span style="color:#998418;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">    savings</span><span style="color:#999999;--shiki-dark:#C792EA">:</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> product</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#BAEBE2;--shiki-dark-font-style:italic">price</span><span style="color:#AB5959;--shiki-dark:#C792EA"> *</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> discountRate</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">  &#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">))</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span></code></pre> <div class="svp-code-block--lang">typescript</div> <!></div></div> <div id="-derived.by" class="svp-anchor-item"></div> <h2><a href="#-derived.by" class="svp-title-anchor" aria-label="$derived.by"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>$derived.by</h2> <p>より複雑なロジックが必要な場合は<code></code>を使用します。</p> <div class="svp-code-block-wrapper"><div class="svp-code-block"><pre class="shiki shiki-themes vitesse-light night-owl" style="background-color:#ffffff;--shiki-dark-bg:#011627;color:#393a34;--shiki-dark:#d6deeb" tabindex="0"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> searchQuery</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">''</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> sortOrder</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#C792EA">&#x3C;</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#B56959;--shiki-dark:#ECC48D">asc</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#7FDBCA"> |</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">desc</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#C792EA">></span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#B56959;--shiki-dark:#ECC48D">asc</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> items</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#D6DEEB">([</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#B56959;--shiki-dark:#ECC48D">apple</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">banana</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">orange</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">grape</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> filteredAndSorted</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">by</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">()</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">  // フィルタリング</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">  let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> filtered</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> items</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">filter</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D7DBE0;--shiki-dark-font-style:italic">item</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#AB5959;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic"> </span></span>
<span class="line"><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">    item</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">toLowerCase</span><span style="color:#999999;--shiki-dark:#D6DEEB">()</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">includes</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">searchQuery</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">toLowerCase</span><span style="color:#999999;--shiki-dark:#D6DEEB">())</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">  )</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#AB5959;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  </span></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">  // ソート</span></span>
<span class="line"><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">  filtered</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">sort</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D7DBE0;--shiki-dark-font-style:italic">a</span><span style="color:#999999;--shiki-dark:#C792EA">,</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D7DBE0;--shiki-dark-font-style:italic"> b</span><span style="color:#999999;--shiki-dark:#D9F5DD">)</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#C792EA">    if</span><span style="color:#999999;--shiki-dark:#D6DEEB"> (</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">sortOrder</span><span style="color:#AB5959;--shiki-dark:#C792EA"> ===</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">asc</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">      return</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> a</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">localeCompare</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">b</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">    &#125;</span><span style="color:#1E754F;--shiki-dark:#C792EA"> else</span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">      return</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> b</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">localeCompare</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">a</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">    &#125;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">  &#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#AB5959;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  </span></span>
<span class="line"><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  return</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> filtered</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">&#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span></code></pre> <div class="svp-code-block--lang">typescript</div> <!></div></div> <div id="実践例：ショッピングカート" class="svp-anchor-item"></div> <h2><a href="#実践例：ショッピングカート" class="svp-title-anchor" aria-label="実践例：ショッピングカート"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>実践例：ショッピングカート</h2> <div class="svp-code-block-wrapper"><div class="svp-code-block"><pre class="shiki shiki-themes vitesse-light night-owl" style="background-color:#ffffff;--shiki-dark-bg:#011627;color:#393a34;--shiki-dark:#d6deeb" tabindex="0"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">type</span><span style="color:#2E8F82;--shiki-dark:#D6DEEB"> Product</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#999999;--shiki-dark:#D6DEEB"> &#123;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#D6DEEB">  id</span><span style="color:#999999;--shiki-dark:#7FDBCA">:</span><span style="color:#2E8F82;--shiki-dark:#C5E478"> string</span><span style="color:#999999;--shiki-dark:#D6DEEB">;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#D6DEEB">  name</span><span style="color:#999999;--shiki-dark:#7FDBCA">:</span><span style="color:#2E8F82;--shiki-dark:#C5E478"> string</span><span style="color:#999999;--shiki-dark:#D6DEEB">;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#D6DEEB">  price</span><span style="color:#999999;--shiki-dark:#7FDBCA">:</span><span style="color:#2E8F82;--shiki-dark:#C5E478"> number</span><span style="color:#999999;--shiki-dark:#D6DEEB">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">&#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">type</span><span style="color:#2E8F82;--shiki-dark:#D6DEEB"> CartItem</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#999999;--shiki-dark:#D6DEEB"> &#123;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#D6DEEB">  product</span><span style="color:#999999;--shiki-dark:#7FDBCA">:</span><span style="color:#2E8F82;--shiki-dark:#FFCB8B"> Product</span><span style="color:#999999;--shiki-dark:#D6DEEB">;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#D6DEEB">  quantity</span><span style="color:#999999;--shiki-dark:#7FDBCA">:</span><span style="color:#2E8F82;--shiki-dark:#C5E478"> number</span><span style="color:#999999;--shiki-dark:#D6DEEB">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">&#125;;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> cart</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#C792EA">&#x3C;</span><span style="color:#2E8F82;font-style:inherit;--shiki-dark:#FFCB8B;--shiki-dark-font-style:italic">CartItem</span><span style="color:#999999;--shiki-dark:#D6DEEB">[]</span><span style="color:#999999;--shiki-dark:#C792EA">></span><span style="color:#999999;--shiki-dark:#D6DEEB">([]);</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> taxRate</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#2F798A;--shiki-dark:#F78C6C">0.1</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> shippingFee</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#2F798A;--shiki-dark:#F78C6C">500</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// カート内の商品数</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> itemCount</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span></span>
<span class="line"><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">  cart</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">reduce</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D7DBE0;--shiki-dark-font-style:italic">sum</span><span style="color:#999999;--shiki-dark:#C792EA">,</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D7DBE0;--shiki-dark-font-style:italic"> item</span><span style="color:#999999;--shiki-dark:#D9F5DD">)</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> sum</span><span style="color:#AB5959;--shiki-dark:#C792EA"> +</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> item</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#BAEBE2;--shiki-dark-font-style:italic">quantity</span><span style="color:#999999;--shiki-dark:#C792EA">,</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 0</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// 小計</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> subtotal</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span></span>
<span class="line"><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">  cart</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">reduce</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D7DBE0;--shiki-dark-font-style:italic">sum</span><span style="color:#999999;--shiki-dark:#C792EA">,</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D7DBE0;--shiki-dark-font-style:italic"> item</span><span style="color:#999999;--shiki-dark:#D9F5DD">)</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#AB5959;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic"> </span></span>
<span class="line"><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">    sum</span><span style="color:#AB5959;--shiki-dark:#C792EA"> +</span><span style="color:#999999;--shiki-dark:#D6DEEB"> (</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">item</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#FAF39F;--shiki-dark-font-style:italic">product</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#BAEBE2;--shiki-dark-font-style:italic">price</span><span style="color:#AB5959;--shiki-dark:#C792EA"> *</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> item</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#BAEBE2;--shiki-dark-font-style:italic">quantity</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#999999;--shiki-dark:#C792EA">,</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 0</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">  )</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// 税額</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> tax</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">Math</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">floor</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">subtotal</span><span style="color:#AB5959;--shiki-dark:#C792EA"> *</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> taxRate</span><span style="color:#999999;--shiki-dark:#D6DEEB">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// 送料（5000円以上で無料）</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> shipping</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">()</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#C792EA">  if</span><span style="color:#999999;--shiki-dark:#D6DEEB"> (</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">subtotal</span><span style="color:#999999;--shiki-dark:#C792EA"> >=</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 5000</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic"> return</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 0</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  return</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> shippingFee</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">&#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// 合計</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> total</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">subtotal</span><span style="color:#AB5959;--shiki-dark:#C792EA"> +</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> tax</span><span style="color:#AB5959;--shiki-dark:#C792EA"> +</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> shipping</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// 注文サマリー</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> orderSummary</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">()</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#D6DEEB"> (</span><span style="color:#999999;--shiki-dark:#C792EA">&#123;</span></span>
<span class="line"><span style="color:#998418;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  items</span><span style="color:#999999;--shiki-dark:#C792EA">:</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> itemCount</span><span style="color:#999999;--shiki-dark:#C792EA">,</span></span>
<span class="line"><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">  subtotal</span><span style="color:#999999;--shiki-dark:#C792EA">,</span></span>
<span class="line"><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">  tax</span><span style="color:#999999;--shiki-dark:#C792EA">,</span></span>
<span class="line"><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">  shipping</span><span style="color:#999999;--shiki-dark:#C792EA">,</span></span>
<span class="line"><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">  total</span><span style="color:#999999;--shiki-dark:#C792EA">,</span></span>
<span class="line"><span style="color:#998418;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  freeShippingAmount</span><span style="color:#999999;--shiki-dark:#C792EA">:</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> subtotal</span><span style="color:#999999;--shiki-dark:#C792EA"> &#x3C;</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 5000</span><span style="color:#AB5959;--shiki-dark:#C792EA"> ?</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 5000</span><span style="color:#AB5959;--shiki-dark:#C792EA"> -</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> subtotal</span><span style="color:#AB5959;--shiki-dark:#C792EA"> :</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 0</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">&#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">));</span></span></code></pre> <div class="svp-code-block--lang">typescript</div> <!></div></div> <div id="パフォーマンスの考慮" class="svp-anchor-item"></div> <h2><a href="#パフォーマンスの考慮" class="svp-title-anchor" aria-label="パフォーマンスの考慮"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>パフォーマンスの考慮</h2> <div id="メモ化" class="svp-anchor-item"></div> <h3><a href="#メモ化" class="svp-title-anchor" aria-label="メモ化"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>メモ化</h3> <p><code></code>は自動的にメモ化されます。依存する値が変わらない限り、再計算されません。</p> <div class="svp-code-block-wrapper"><div class="svp-code-block"><pre class="shiki shiki-themes vitesse-light night-owl" style="background-color:#ffffff;--shiki-dark-bg:#011627;color:#393a34;--shiki-dark:#d6deeb" tabindex="0"><code><span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> count</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $state</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#2F798A;--shiki-dark:#F78C6C">0</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// この計算は count が変更された時のみ実行される</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> expensive</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">()</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">  console</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">log</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#B56959;--shiki-dark:#ECC48D">計算中...</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  return</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> count</span><span style="color:#AB5959;--shiki-dark:#C792EA"> *</span><span style="color:#2F798A;--shiki-dark:#F78C6C"> 2</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">&#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span></code></pre> <div class="svp-code-block--lang">typescript</div> <!></div></div> <div id="注意点" class="svp-anchor-item"></div> <h3><a href="#注意点" class="svp-title-anchor" aria-label="注意点"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>注意点</h3> <div class="svp-code-block-wrapper"><div class="svp-code-block"><pre class="shiki shiki-themes vitesse-light night-owl" style="background-color:#ffffff;--shiki-dark-bg:#011627;color:#393a34;--shiki-dark:#d6deeb" tabindex="0"><code><span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// ❌ 副作用を含めない</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> value</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">()</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">  localStorage</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">setItem</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#B56959;--shiki-dark:#ECC48D">key</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#C792EA">,</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">value</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#999999;--shiki-dark:#C792EA">;</span><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic"> // 副作用</span></span>
<span class="line"><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  return</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> calculateValue</span><span style="color:#999999;--shiki-dark:#D6DEEB">()</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">&#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// ✅ 純粋な計算のみ</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> value</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">calculateValue</span><span style="color:#999999;--shiki-dark:#D6DEEB">());</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// 副作用は $effect で</span></span>
<span class="line"><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">$effect</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">()</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#D6DEEB"> &#123;</span></span>
<span class="line"><span style="color:#B07D48;--shiki-dark:#D6DEEB">  localStorage</span><span style="color:#999999;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">.</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">setItem</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#B56959;--shiki-dark:#ECC48D">key</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#D6DEEB">,</span><span style="color:#B07D48;--shiki-dark:#D6DEEB"> value</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">&#125;);</span></span></code></pre> <div class="svp-code-block--lang">typescript</div> <!></div></div> <div id="ベストプラクティス" class="svp-anchor-item"></div> <h2><a href="#ベストプラクティス" class="svp-title-anchor" aria-label="ベストプラクティス"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>ベストプラクティス</h2> <div id="1.-シンプルに保つ" class="svp-anchor-item"></div> <h3><a href="#1.-シンプルに保つ" class="svp-title-anchor" aria-label="1. シンプルに保つ"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>1. シンプルに保つ</h3> <div class="svp-code-block-wrapper"><div class="svp-code-block"><pre class="shiki shiki-themes vitesse-light night-owl" style="background-color:#ffffff;--shiki-dark-bg:#011627;color:#393a34;--shiki-dark:#d6deeb" tabindex="0"><code><span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// ❌ 複雑すぎる</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> result</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">()</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">  // 100行のロジック...</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">&#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// ✅ 関数に分割</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">function</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> calculateResult</span><span style="color:#999999;--shiki-dark:#D9F5DD">(</span><span style="color:#B07D48;--shiki-dark:#D7DBE0">data</span><span style="color:#999999;--shiki-dark:#7FDBCA">:</span><span style="color:#2E8F82;--shiki-dark:#FFCB8B"> Data</span><span style="color:#999999;--shiki-dark:#D9F5DD">)</span><span style="color:#999999;--shiki-dark:#D6DEEB"> &#123;</span></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">  // ロジック</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#D6DEEB">&#125;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> result</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic">calculateResult</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">data</span><span style="color:#999999;--shiki-dark:#D6DEEB">));</span></span></code></pre> <div class="svp-code-block--lang">typescript</div> <!></div></div> <div id="2.-型を明確に" class="svp-anchor-item"></div> <h3><a href="#2.-型を明確に" class="svp-title-anchor" aria-label="2. 型を明確に"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>2. 型を明確に</h3> <div class="svp-code-block-wrapper"><div class="svp-code-block"><pre class="shiki shiki-themes vitesse-light night-owl" style="background-color:#ffffff;--shiki-dark-bg:#011627;color:#393a34;--shiki-dark:#d6deeb" tabindex="0"><code><span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// TypeScriptが型を推論できない場合は明示的に指定</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> result</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#C792EA">&#x3C;</span><span style="color:#2E8F82;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic">string</span><span style="color:#999999;--shiki-dark:#7FDBCA"> |</span><span style="color:#AB5959;font-style:inherit;--shiki-dark:#C5E478;--shiki-dark-font-style:italic"> null</span><span style="color:#999999;--shiki-dark:#C792EA">></span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">()</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#1E754F;--shiki-dark:#C792EA">  if</span><span style="color:#999999;--shiki-dark:#D6DEEB"> (</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic">condition</span><span style="color:#999999;--shiki-dark:#D6DEEB">)</span><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic"> return</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">value</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#1E754F;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  return</span><span style="color:#AB5959;font-style:inherit;--shiki-dark:#FF5874;--shiki-dark-font-style:italic"> null</span><span style="color:#999999;--shiki-dark:#C792EA">;</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">&#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">);</span></span></code></pre> <div class="svp-code-block--lang">typescript</div> <!></div></div> <div id="3.-不要な再計算を避ける" class="svp-anchor-item"></div> <h3><a href="#3.-不要な再計算を避ける" class="svp-title-anchor" aria-label="3. 不要な再計算を避ける"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>3. 不要な再計算を避ける</h3> <div class="svp-code-block-wrapper"><div class="svp-code-block"><pre class="shiki shiki-themes vitesse-light night-owl" style="background-color:#ffffff;--shiki-dark-bg:#011627;color:#393a34;--shiki-dark:#d6deeb" tabindex="0"><code><span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// ❌ 毎回新しいオブジェクトを作成</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">let</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#D6DEEB;--shiki-dark-font-style:italic"> config</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#59873A;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> $derived</span><span style="color:#999999;--shiki-dark:#D6DEEB">(</span><span style="color:#999999;--shiki-dark:#D9F5DD">()</span><span style="color:#999999;--shiki-dark:#C792EA"> =></span><span style="color:#999999;--shiki-dark:#D6DEEB"> (</span><span style="color:#999999;--shiki-dark:#C792EA">&#123;</span></span>
<span class="line"><span style="color:#998418;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  theme</span><span style="color:#999999;--shiki-dark:#C792EA">:</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">dark</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#C792EA">,</span></span>
<span class="line"><span style="color:#998418;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  lang</span><span style="color:#999999;--shiki-dark:#C792EA">:</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">ja</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">&#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">));</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A0ADA0;font-style:inherit;--shiki-dark:#637777;--shiki-dark-font-style:italic">// ✅ 値が変わらない場合は定数として定義</span></span>
<span class="line"><span style="color:#AB5959;--shiki-dark:#C792EA">const</span><span style="color:#B07D48;font-style:inherit;--shiki-dark:#82AAFF;--shiki-dark-font-style:italic"> CONFIG</span><span style="color:#999999;--shiki-dark:#C792EA"> =</span><span style="color:#999999;--shiki-dark:#C792EA"> &#123;</span></span>
<span class="line"><span style="color:#998418;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  theme</span><span style="color:#999999;--shiki-dark:#C792EA">:</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">dark</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span><span style="color:#999999;--shiki-dark:#C792EA">,</span></span>
<span class="line"><span style="color:#998418;font-style:inherit;--shiki-dark:#C792EA;--shiki-dark-font-style:italic">  lang</span><span style="color:#999999;--shiki-dark:#C792EA">:</span><span style="color:#B5695977;--shiki-dark:#D9F5DD"> '</span><span style="color:#B56959;--shiki-dark:#ECC48D">ja</span><span style="color:#B5695977;--shiki-dark:#D9F5DD">'</span></span>
<span class="line"><span style="color:#999999;--shiki-dark:#C792EA">&#125;</span><span style="color:#999999;--shiki-dark:#D6DEEB">;</span></span></code></pre> <div class="svp-code-block--lang">typescript</div> <!></div></div> <div id="次のステップ" class="svp-anchor-item"></div> <h2><a href="#次のステップ" class="svp-title-anchor" aria-label="次のステップ"><svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 512 512"><path d="M280 341.1l-1.2.1c-3.6.4-7 2-9.6 4.5l-64.6 64.6c-13.7 13.7-32 21.2-51.5 21.2s-37.8-7.5-51.5-21.2c-13.7-13.7-21.2-32-21.2-51.5s7.5-37.8 21.2-51.5l68.6-68.6c3.5-3.5 7.3-6.6 11.4-9.3 4.6-3 9.6-5.6 14.8-7.5 4.8-1.8 9.9-3 15-3.7 3.4-.5 6.9-.7 10.2-.7 1.4 0 2.8.1 4.6.2 17.7 1.1 34.4 8.6 46.8 21 7.7 7.7 13.6 17.1 17.1 27.3 2.8 8 11.2 12.5 19.3 10.1.1 0 .2-.1.3-.1.1 0 .2 0 .2-.1 8.1-2.5 12.8-11 10.5-19.1-4.4-15.6-12.2-28.7-24.6-41-15.6-15.6-35.9-25.8-57.6-29.3-1.9-.3-3.8-.6-5.7-.8-3.7-.4-7.4-.6-11.1-.6-2.6 0-5.2.1-7.7.3-5.4.4-10.8 1.2-16.2 2.5-1.1.2-2.1.5-3.2.8-6.7 1.8-13.3 4.2-19.5 7.3-10.3 5.1-19.6 11.7-27.7 19.9l-68.6 68.6C58.9 304.4 48 330.8 48 359c0 28.2 10.9 54.6 30.7 74.4C98.5 453.1 124.9 464 153 464c28.2 0 54.6-10.9 74.4-30.7l65.3-65.3c10.4-10.5 2-28.3-12.7-26.9z" fill="currentColor"></path><path d="M433.3 78.7C413.5 58.9 387.1 48 359 48s-54.6 10.9-74.4 30.7l-63.7 63.7c-9.7 9.7-3.6 26.3 10.1 27.4 4.7.4 9.3-1.3 12.7-4.6l63.8-63.6c13.7-13.7 32-21.2 51.5-21.2s37.8 7.5 51.5 21.2c13.7 13.7 21.2 32 21.2 51.5s-7.5 37.8-21.2 51.5l-68.6 68.6c-3.5 3.5-7.3 6.6-11.4 9.3-4.6 3-9.6 5.6-14.8 7.5-4.8 1.8-9.9 3-15 3.7-3.4.5-6.9.7-10.2.7-1.4 0-2.9-.1-4.6-.2-17.7-1.1-34.4-8.6-46.8-21-7.3-7.3-12.8-16-16.4-25.5-2.9-7.7-11.1-11.9-19.1-9.8-8.9 2.3-14.1 11.7-11.3 20.5 4.5 14 12.1 25.9 23.7 37.5l.2.2c16.9 16.9 39.4 27.6 63.3 30.1 3.7.4 7.4.6 11.1.6 2.6 0 5.2-.1 7.8-.3 6.5-.5 13-1.6 19.3-3.2 6.7-1.8 13.3-4.2 19.5-7.3 10.3-5.1 19.6-11.7 27.7-19.9l68.6-68.6c19.8-19.8 30.7-46.2 30.7-74.4s-11.1-54.6-30.9-74.4z" fill="currentColor"></path></svg></a>次のステップ</h2> <p>派生値の作成方法を理解したら、<!>で副作用の処理方法を学びましょう。</p>`,1);function As(P){const T={pageType:"md",lastUpdate:"Invalid Date",anchors:[{slugId:"-derivedとは",title:"$derivedとは",depth:2},{slugId:"基本的な使い方",title:"基本的な使い方",depth:2},{slugId:"シンプルな計算",title:"シンプルな計算",depth:3},{slugId:"複数の値から派生",title:"複数の値から派生",depth:3},{slugId:"関数を使った複雑な計算",title:"関数を使った複雑な計算",depth:2},{slugId:"条件付き派生",title:"条件付き派生",depth:2},{slugId:"配列とオブジェクトの派生",title:"配列とオブジェクトの派生",depth:2},{slugId:"フィルタリング",title:"フィルタリング",depth:3},{slugId:"マッピング",title:"マッピング",depth:3},{slugId:"-derived.by",title:"$derived.by",depth:2},{slugId:"実践例：ショッピングカート",title:"実践例：ショッピングカート",depth:2},{slugId:"パフォーマンスの考慮",title:"パフォーマンスの考慮",depth:2},{slugId:"メモ化",title:"メモ化",depth:3},{slugId:"注意点",title:"注意点",depth:3},{slugId:"ベストプラクティス",title:"ベストプラクティス",depth:2},{slugId:"1.-シンプルに保つ",title:"1. シンプルに保つ",depth:3},{slugId:"2.-型を明確に",title:"2. 型を明確に",depth:3},{slugId:"3.-不要な再計算を避ける",title:"3. 不要な再計算を避ける",depth:3},{slugId:"次のステップ",title:"次のステップ",depth:2}],title:"$derivedルーン",description:"他の値から自動的に計算される派生値"};es(P,{get fm(){return T},children:(L,cs)=>{var v=ps(),t=s(rs(v),4),O=a(t);O.textContent="$derived",n(),i(t);var r=s(t,10),F=a(r),S=s(a(F),4);l(S,{}),i(F),i(r);var o=s(r,6),g=a(o),j=s(a(g),4);l(j,{}),i(g),i(o);var e=s(o,6),u=a(e),Q=s(a(u),4);l(Q,{}),i(u),i(e);var k=s(e,6),m=a(k),V=s(a(m),4);l(V,{}),i(m),i(k);var p=s(k,10),b=a(p),G=s(a(b),4);l(G,{}),i(b),i(p);var c=s(p,6),w=a(c),U=s(a(w),4);l(U,{}),i(w),i(c);var h=s(c,6),W=s(a(h));W.textContent="$derived.by",n(),i(h);var d=s(h,2),x=a(d),H=s(a(x),4);l(H,{}),i(x),i(d);var y=s(d,6),$=a(y),J=s(a($),4);l(J,{}),i($),i(y);var D=s(y,10),K=a(D);K.textContent="$derived",n(),i(D);var E=s(D,2),_=a(E),X=s(a(_),4);l(X,{}),i(_),i(E);var f=s(E,6),M=a(f),Y=s(a(M),4);l(Y,{}),i(M),i(f);var B=s(f,10),z=a(B),Z=s(a(z),4);l(Z,{}),i(z),i(B);var A=s(B,6),I=a(A),ss=s(a(I),4);l(ss,{}),i(I),i(A);var C=s(A,6),R=a(C),as=s(a(R),4);l(as,{}),i(R),i(C);var q=s(C,6),is=s(a(q));ks(is,{to:"/basics/effect/",labelRenderer:ls=>{n();var ns=os("$effect - 副作用");N(ls,ns)},$$slots:{labelRenderer:!0}}),n(),i(q),N(L,v)},$$slots:{default:!0}})}export{As as component};
